<!DOCTYPE html>
<html lang="es" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cotizador Pro — Bootstrap + JS (Single File)</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- DataTables (jQuery plugin) -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="css.css">
  <!-- Custom styles -->

</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-xxl">
      <!-- Marca -->
      <a class="navbar-brand fw-bold" href="#">
        <i class="bi bi-calculator"></i> Cotizador Pro
      </a>
  
      <!-- Botón toggler (para móvil) -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain"
        aria-controls="navbarMain" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
  
      <!-- Contenido colapsable -->
      <div class="collapse navbar-collapse" id="navbarMain">
        <div class="ms-auto d-flex gap-2 flex-wrap">
          <!-- Botón de tema -->
          <button id="btn-theme" class="btn btn-sm btn-nav">
            <i class="bi bi-sun"></i> Oscuro
          </button>
          <!-- Botones originales -->
          <button id="btn-tests" class="btn btn-sm btn-nav">
            <i class="bi bi-bug"></i> Pruebas
          </button>
          <button id="btn-new" class="btn btn-sm btn-nav">
            <i class="bi bi-file-earmark-plus"></i> Nueva
          </button>
          <button id="btn-save" class="btn btn-sm btn-nav">
            <i class="bi bi-save2"></i> Guardar
          </button>
          <button id="btn-load" class="btn btn-sm btn-nav">
            <i class="bi bi-cloud-download"></i> Cargar
          </button>
          <button id="btn-print" class="btn btn-sm btn-nav">
            <i class="bi bi-printer"></i> Imprimir
          </button>
          <button id="btn-pdf" class="btn btn-sm btn-primary">
            <i class="bi bi-filetype-pdf"></i> PDF
          </button>
        </div>
      </div>
    </div>
  </nav>
  

  <main class="container-xxl my-4">
    <div class="row g-3">

      <!-- Catálogo -->
      <div class="col-12 col-lg-8">
        <div class="card h-100">
          <div class="card-header d-flex align-items-center justify-content-between">
            <h5 class="mb-0">Catálogo</h5>
            <span class="pill"><span id="count-products">0</span> ítems</span>
          </div>
          <div class="card-body">

            <!-- Carga de archivo -->
            <div class="row g-2 align-items-center no-print">
              <div class="col-sm-6">
                <label class="form-label">Subir Excel/CSV</label>
                <input id="file-input" type="file" accept=".xlsx,.xls,.csv" class="form-control" />
                <div class="form-text">Formatos soportados: .xlsx, .xls, .csv</div>
                <div id="load-status" class="small mt-2"></div>
              </div>
              <div class="col-sm-6">
                <div id="dropzone" class="dropzone text-secondary">
                  Arrastrá y soltá el archivo aquí
                </div>
              </div>
            </div>

            <!-- Filtros -->
            <div class="row g-2 mt-1 no-print">
              <div class="col-12 col-md-4">
                <label class="form-label">Categoría</label>
                <select id="filter-category" class="form-select">
                  <option value="">Todas</option>
                </select>
              </div>
              <div class="col-12 col-md-4">
                <label class="form-label">Marca</label>
                <select id="filter-brand" class="form-select">
                  <option value="">Todas</option>
                </select>
              </div>
              <div class="col-6 col-md-2">
                <label class="form-label">Precio min</label>
                <input id="filter-min" class="form-control" type="number" min="0" placeholder="0" />
              </div>
              <div class="col-6 col-md-2">
                <label class="form-label">Precio max</label>
                <input id="filter-max" class="form-control" type="number" min="0" placeholder="∞" />
              </div>
            </div>

            <!-- Tabla catálogo -->
            <div class="table-responsive mt-3">
              <table id="table-catalog" class="table table-sm align-middle" style="width:100%">
                <thead>
                  <tr>
                    <th>Código</th>
                    <th>Descripción</th>
                    <th>Categoría</th>
                    <th>Marca</th>
                    <th>Unidad</th>
                    <th class="text-end">Precio</th>
                    <th class="no-print">Acción</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

          </div>
        </div>
      </div>

      <!-- Carrito / Cotización -->
      <div class="col-12 col-lg-4">
        <div class="card h-100">
          <div class="card-header d-flex align-items-center justify-content-between">
            <h5 class="mb-0">Carrito / Cotización</h5>
            <button id="btn-add-manual" class="btn btn-outline-light btn-sm no-print"><i class="bi bi-plus-circle"></i> Ítem manual</button>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-sm" id="table-cart">
                <thead>
                  <thead>
                    <th>Código</th>
                    <th>Descripción</th>
                    <th class="text-end">Precio</th>
                    <th style="width:90px">Cant.</th>
                    <th class="text-end">Subt.</th>
                    <th class="no-print\"></th>
                  </thead>tr>
                </thead>
                <tbody id="cart-body"></tbody>
              </table>
            </div>

            <div class="row g-2 no-print">
              <div class="col-6">
                <label class="form-label">IVA % (por defecto)</label>
                <input id="iva-global" type="number" class="form-control" min="0" step="0.1" value="21" />
              </div>
              <div class="col-6">
                <label class="form-label">Descuento % (global)</label>
                <input id="discount-global" type="number" class="form-control" min="0" step="0.1" value="0" />
              </div>
            </div>

            <ul class="list-group list-group-flush mt-3 totals">
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>Subtotal Neto</span>
                <strong id="total-neto">$ 0</strong>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>Impuestos</span>
                <strong id="total-impuestos">$ 0</strong>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>Descuento</span>
                <strong id="total-descuento">$ 0</strong>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <span class="fs-5">Total</span>
                <strong class="fs-5" id="total-final">$ 0</strong>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Datos del Cliente / Empresa -->
      <div class="col-12">
        <div class="card">
          <div class="card-body">
            <div class="row g-3">
              <div class="col-12 col-lg-6">
                <h5>Datos del Cliente</h5>
                <div class="row g-2">
                  <div class="col-12">
                    <label class="form-label">Nombre / Razón Social</label>
                    <input id="cli-nombre" class="form-control" placeholder="Cliente S.A." />
                  </div>
                  <div class="col-6">
                    <label class="form-label">CUIT / DNI</label>
                    <input id="cli-cuit" class="form-control" />
                  </div>
                  <div class="col-6">
                    <label class="form-label">Email</label>
                    <input id="cli-email" class="form-control" type="email" />
                  </div>
                  <div class="col-12">
                    <label class="form-label">Domicilio</label>
                    <input id="cli-dir" class="form-control" />
                  </div>
                  <div class="col-6">
                    <label class="form-label">Teléfono</label>
                    <input id="cli-tel" class="form-control" />
                  </div>
                </div>
              </div>
              <div class="col-12 col-lg-6 part">
                <h5>Datos de la Empresa</h5>
                <div class="row g-2">
                  <div class="col-12">
                    <label class="form-label">Nombre</label>
                    <input id="emp-nombre" class="form-control" placeholder="Mi Empresa" />
                  </div>
                  <div class="col-12">
                    <label class="form-label logo">Logo (URL)</label>
                    <input id="emp-logo" class="form-control" placeholder="https://..." />
                  </div>
                  <div class="col-12">
                    <label class="form-label">Dirección</label>
                    <input id="emp-dir" class="form-control" />
                  </div>
                  <div class="col-6">
                    <label class="form-label">Condición IVA</label>
                    <input id="emp-iva" class="form-control" placeholder="Responsable Inscripto" />
                  </div>
                  <div class="col-6">
                    <label class="form-label">Email</label>
                    <input id="emp-email" class="form-control" type="email" placeholder="nicosiafernando2@gmail.com" />
                  </div>
                  <div class="col-6">
                    <label class="form-label">Teléfono</label>
                    <input id="emp-tel" class="form-control" />
                  </div>
                </div>
              </div>
            </div>

            <hr class="border-secondary my-4">

            <div class="row g-3">
              <div class="col-12 col-lg-4">
                <h5>Condiciones</h5>
                <div class="row g-2">
                  <div class="col-6">
                    <label class="form-label">Validez (días)</label>
                    <input id="cond-validez" class="form-control" type="number" min="0" value="7" />
                  </div>
                  <div class="col-6">
                    <label class="form-label">Plazo entrega</label>
                    <input id="cond-plazo" class="form-control" placeholder="72 hs" />
                  </div>
                  <div class="col-12">
                    <label class="form-label">Forma de pago</label>
                    <input id="cond-pago" class="form-control" placeholder="Contado / Transferencia" />
                  </div>
                  <div class="col-12">
                    <label class="form-label">Notas</label>
                    <textarea id="cond-notas" class="form-control" rows="3"></textarea>
                  </div>
                </div>
              </div>
              <div class="col-12 col-lg-8">
                <h5>Previsualización de Cotización</h5>
                <div id="quote" class="quote-preview card border-0 p-4"><!-- Render JS --></div>
              </div>
            </div>

            <!-- Resultados de pruebas -->
            <div class="row g-3 mt-3 no-print">
              <div class="col-12">
                <div class="p-3 border rounded-3 d-flex align-items-center gap-2">
                  <strong>Pruebas:</strong>
                  <span id="tests-summary" class="test-pill">Aún no ejecutadas</span>
                </div>
                <div id="tests-detail" class="small mt-2"></div>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- JS libs -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- jQuery (requerido por DataTables plugin) -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/locale/es.js"></script>
  <script>dayjs.locale('es');</script>
  <!-- jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.1/dist/jspdf.plugin.autotable.min.js"></script>
  

  <!-- App JS -->
 <script type="module" src="js.js"></script>
 <script type="module" src="theme.js"></script>
</body>
</html>
